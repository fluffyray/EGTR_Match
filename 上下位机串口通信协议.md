# 上下位机串口通信协议

​	上下位机得串口通信协议基于json格式，通过串口传输json文件格式的文本从而传输电机速度，油门量等数据。

## 上位机TO下位机

​	由以下json文件定义

~~~json
{
    "bot":
    {
    	"movemode":"translation",
    	"throttle":100,
    	"direction":90
    },
	"axe":[180,180,180,180,180,180,180]
}
~~~

### 	bot属性

与小车移动有关的属性

- movemode : 表示小车的移动模式，"translation"指平动，"rotate"指转动

- throttle : 油门量，取值0~100浮点型，表示电机最大电流的百分比(在保持当前方向的前提下)。

- direction : 方向，取值0~360浮点型，表示小车移动的方向。在转动模式下可取负值，表示转动方向，正数数为逆时针，负数为顺时针。

  ![image-20201209131505056](C:\Users\Ray\AppData\Roaming\Typora\typora-user-images\image-20201209131505056.png)

  上图为小车的坐标系，该坐标系固结在小车上，随小车一起做平面运动

###  axe属性

与机械臂移动有关的属性

数组中数值表示了对应编号舵机的转角，取值-135~135整型



## 下位机TO上位机

​	由以下json文件定义

~~~json
{
    "bot":
    {
        "speed":[10,10],
        "motor":[50,50,50,50]
    },
    "axe":[180,180,180,180,180,180,180]
}
~~~

### bot属性

- speed : 小车移动的绝对速度，数组第一个值为平动速度，单位m/s浮点型；第二个为转动速度，单位rad/s浮点型
- motor : 电机转速百分比，浮点型，指当前电机转速与轮胎悬空情况下的转速的百分比，数组中的数据依次为左前、右前、左后、右后的电机转速百分比。

### axe属性

​	与前面相同，表示舵机转角

  